<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="REG_INTERVAL_INS_TRG" directorySegmentName="seg_0" id="C3108969-2D6D-29C9-7E35-8A61525E1080">
<createdBy>Bart≈Çomiej Krawczyk</createdBy>
<createdTime>2022-05-17 08:36:12 UTC</createdTime>
<ownerDesignName>BD2C049</ownerDesignName>
<actions>INSERT</actions>
<body><![CDATA[DECLARE
    v_registrations NUMBER;
BEGIN
    -- Count registrations overlaping with new registration
    SELECT 	COUNT(*)
    INTO    v_registrations
    FROM 	registrations reg 
    WHERE 	(:new.start_date BETWEEN reg.start_date AND reg.end_date) 
            OR	(:new.end_date BETWEEN reg.start_date AND reg.end_date) 
            OR	(reg.start_date BETWEEN :new.start_date AND :new.end_date);

    -- If there are registrations overlaping an signal error
	IF v_registrations > 0  THEN
		raise_application_error(-20000, 'Two Registrations Overlap!');
	END IF;
END; ]]></body>
<triggerTime>BEFORE</triggerTime>
<state>ENABLE</state>
<table>2319E7A6-9941-3117-7F5A-9391AA768A26</table>
</TriggerOraclev10g>
